-- MySQL Script generated by MySQL Workbench
-- Wed Sep 28 16:32:33 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema SkytecGames
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `SkytecGames` ;

-- -----------------------------------------------------
-- Schema SkytecGames
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `SkytecGames` DEFAULT CHARACTER SET utf8 ;
USE `SkytecGames` ;

-- -----------------------------------------------------
-- Table `SkytecGames`.`User`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SkytecGames`.`User` (
  `idUser` INT NOT NULL,
  `name` VARCHAR(80) NULL,
  PRIMARY KEY (`idUser`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SkytecGames`.`Clan`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SkytecGames`.`Clan` (
  `idClan` INT NOT NULL,
  `name` VARCHAR(80) NULL,
  `gold` INT NULL,
  PRIMARY KEY (`idClan`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SkytecGames`.`ClansToUser`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SkytecGames`.`ClansToUser` (
  `idClansToUser` INT NOT NULL,
  `idClan` INT NULL,
  `idUser` INT NULL,
  PRIMARY KEY (`idClansToUser`),
  INDEX `ClanToUser_idx` (`idClan` ASC) VISIBLE,
  INDEX `UserToClan_idx` (`idUser` ASC) VISIBLE,
  CONSTRAINT `ClanToUser`
    FOREIGN KEY (`idClan`)
    REFERENCES `SkytecGames`.`Clan` (`idClan`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `UserToClan`
    FOREIGN KEY (`idUser`)
    REFERENCES `SkytecGames`.`User` (`idUser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SkytecGames`.`TransactionHistory`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SkytecGames`.`TransactionHistory` (
  `idTransactionHistory` INT NOT NULL,
  `date` DATE NULL,
  `user` INT NULL,
  `clan` INT NULL,
  `goldInTransaction` INT NULL,
  PRIMARY KEY (`idTransactionHistory`),
  INDEX `userName_idx` (`user` ASC) VISIBLE,
  INDEX `clanName_idx` (`clan` ASC) VISIBLE,
  CONSTRAINT `userName`
    FOREIGN KEY (`user`)
    REFERENCES `SkytecGames`.`User` (`idUser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `clanName`
    FOREIGN KEY (`clan`)
    REFERENCES `SkytecGames`.`Clan` (`idClan`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `SkytecGames`.`User`
-- -----------------------------------------------------
START TRANSACTION;
USE `SkytecGames`;
INSERT INTO `SkytecGames`.`User` (`idUser`, `name`) VALUES (1, 'Bilbo Baggins');
INSERT INTO `SkytecGames`.`User` (`idUser`, `name`) VALUES (2, 'The Old Took');
INSERT INTO `SkytecGames`.`User` (`idUser`, `name`) VALUES (3, 'Bard the Bowman');
INSERT INTO `SkytecGames`.`User` (`idUser`, `name`) VALUES (4, 'Beorn');
INSERT INTO `SkytecGames`.`User` (`idUser`, `name`) VALUES (5, 'Thror');
INSERT INTO `SkytecGames`.`User` (`idUser`, `name`) VALUES (6, 'Thrain');
INSERT INTO `SkytecGames`.`User` (`idUser`, `name`) VALUES (7, 'Dain');
INSERT INTO `SkytecGames`.`User` (`idUser`, `name`) VALUES (8, 'Thorin Oakenshield');
INSERT INTO `SkytecGames`.`User` (`idUser`, `name`) VALUES (9, 'Elrond');
INSERT INTO `SkytecGames`.`User` (`idUser`, `name`) VALUES (10, 'Galion');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SkytecGames`.`Clan`
-- -----------------------------------------------------
START TRANSACTION;
USE `SkytecGames`;
INSERT INTO `SkytecGames`.`Clan` (`idClan`, `name`, `gold`) VALUES (1, 'Elf clan', 1500);
INSERT INTO `SkytecGames`.`Clan` (`idClan`, `name`, `gold`) VALUES (2, 'Dwarf clan', 5000);
INSERT INTO `SkytecGames`.`Clan` (`idClan`, `name`, `gold`) VALUES (3, 'Human clan', 100);
INSERT INTO `SkytecGames`.`Clan` (`idClan`, `name`, `gold`) VALUES (4, 'Hobbit clan', 600);

COMMIT;


-- -----------------------------------------------------
-- Data for table `SkytecGames`.`ClansToUser`
-- -----------------------------------------------------
START TRANSACTION;
USE `SkytecGames`;
INSERT INTO `SkytecGames`.`ClansToUser` (`idClansToUser`, `idClan`, `idUser`) VALUES (1, 4, 1);
INSERT INTO `SkytecGames`.`ClansToUser` (`idClansToUser`, `idClan`, `idUser`) VALUES (2, 4, 2);
INSERT INTO `SkytecGames`.`ClansToUser` (`idClansToUser`, `idClan`, `idUser`) VALUES (3, 3, 3);
INSERT INTO `SkytecGames`.`ClansToUser` (`idClansToUser`, `idClan`, `idUser`) VALUES (4, 3, 4);
INSERT INTO `SkytecGames`.`ClansToUser` (`idClansToUser`, `idClan`, `idUser`) VALUES (5, 2, 5);
INSERT INTO `SkytecGames`.`ClansToUser` (`idClansToUser`, `idClan`, `idUser`) VALUES (6, 2, 6);
INSERT INTO `SkytecGames`.`ClansToUser` (`idClansToUser`, `idClan`, `idUser`) VALUES (7, 2, 7);
INSERT INTO `SkytecGames`.`ClansToUser` (`idClansToUser`, `idClan`, `idUser`) VALUES (8, 2, 8);
INSERT INTO `SkytecGames`.`ClansToUser` (`idClansToUser`, `idClan`, `idUser`) VALUES (9, 1, 9);
INSERT INTO `SkytecGames`.`ClansToUser` (`idClansToUser`, `idClan`, `idUser`) VALUES (10, 1, 10);

COMMIT;

